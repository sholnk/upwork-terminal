# エージェント割り当て & 実行ガイド

## 概要

このドキュメントは、GitHub Issues をベースにエージェントに作業を割り当て、進捗を追跡し、完了を検証するプロセスを定義します。

---

## エージェント割り当てステータス

### Phase 1: MVP 確実化 (CRITICAL - 本日実行)

| Issue # | タイトル | 優先度 | 見積 | 割当先 | ステータス | 開始日 | 予定完了 |
|---------|---------|--------|------|--------|----------|--------|---------|
| 1 | Inbox 完全動作確認 | CRITICAL | 4-5h | (未割当) | OPEN | - | 2026-01-07 |
| 2 | Sophia 改善ループ完成 | CRITICAL | 3-4h | (未割当) | OPEN | - | 2026-01-07 |
| 3 | 提案テンプレート A/B 精度向上 | CRITICAL | 3-4h | (未割当) | OPEN | - | 2026-01-07 |

**フェーズ目標**: MVP3機能が完全に動作し、テストに合格すること
**期限**: 本日中（2026-01-07）
**ブロッカー**: なし（最優先）

---

### Phase 2: 運用品質向上 (HIGH - 今週中)

| Issue # | タイトル | 優先度 | 見積 | 割当先 | ステータス | 開始日 | 予定完了 |
|---------|---------|--------|------|--------|----------|--------|---------|
| 4 | 入力バリデーション & エラー処理 | HIGH | 2-3h | (未割当) | OPEN | - | 2026-01-08 |
| 5 | ジョブデータ品質管理 | HIGH | 2-3h | (未割当) | OPEN | - | 2026-01-09 |
| 6 | UI/UX 初心者向け改善 | HIGH | 2-3h | (未割当) | OPEN | - | 2026-01-10 |

**フェーズ目標**: ユーザー体験向上・エラー日本語化完了
**期限**: 今週中（2026-01-10）
**ブロッカー**: Phase 1 (#1, #2, #3) 完了に依存

---

### Phase 3-4: 拡張機能 & テスト (MEDIUM - 来週中)

| Issue # | タイトル | 優先度 | 見積 | 割当先 | ステータス | 開始日 | 予定完了 |
|---------|---------|--------|------|--------|----------|--------|---------|
| 7 | CSV インポート機能 | MEDIUM | 3-4h | (未割当) | OPEN | - | 2026-01-13 |
| 8 | Contract & Timesheet 機能 | MEDIUM | 4-5h | (未割当) | OPEN | - | 2026-01-14 |
| 9 | 提案履歴 & 勝ちパターン分析 | MEDIUM | 4-5h | (未割当) | OPEN | - | 2026-01-15 |
| 10 | ユニットテスト実装 | MEDIUM | 4-5h | (未割当) | OPEN | - | 2026-01-16 |
| 11 | E2E テスト実装 | MEDIUM | 4-5h | (未割当) | OPEN | - | 2026-01-17 |

**フェーズ目標**: 拡張機能実装・テスト自動化完了
**期限**: 来週中（2026-01-17）
**ブロッカー**: Phase 1, 2 完了に依存

---

### Phase 5-6: デプロイメント (LOW - 今月中)

| Issue # | タイトル | 優先度 | 見積 | 割当先 | ステータス | 開始日 | 予定完了 |
|---------|---------|--------|------|--------|----------|--------|---------|
| 12 | パフォーマンス最適化 | LOW | 3-4h | (未割当) | OPEN | - | 2026-01-28 |
| 13 | デプロイメント構築 | LOW | 3-4h | (未割当) | OPEN | - | 2026-01-29 |
| 14 | モニタリング & ロギング | LOW | 2-3h | (未割当) | OPEN | - | 2026-01-30 |

**フェーズ目標**: 本番環境デプロイ準備・監視体制構築
**期限**: 今月中（2026-01-31）
**ブロッカー**: Phase 1-4 完了に依存

---

### Phase 7: 将来 (FUTURE - SaaS化時)

| Issue # | タイトル | 優先度 | 見積 | 割当先 | ステータス | 開始日 | 予定完了 |
|---------|---------|--------|------|--------|----------|--------|---------|
| 15 | マルチユーザー対応 - SaaS化準備 | FUTURE | 6-8h | (未割当) | OPEN | - | TBD |

**フェーズ目標**: NextAuth.js統合・テナント分離実装
**期限**: 将来のSaaS化検討時
**ブロッカー**: Phase 1-6 完了に依存

---

## エージェント割り当てプロセス

### Step 1: 割り当て前チェックリスト

エージェントに割り当てる前に、Issue が以下を満たしていることを確認：

```
[ ] タイトルが明確（優先度・フェーズ含む）
[ ] 説明が詳細で実装方針が明確である
[ ] Sub-Issues がチェックリスト形式で記載されている
[ ] 定義of Done (DoD) が明確に列挙されている
[ ] 見積時間が現実的である
[ ] ブロッカー・依存Issueが明記されている
[ ] 環境構築に必要な情報が記載されている
[ ] 参考資料・リンクが付けられている
```

### Step 2: 割り当てコメント作成

Issue に以下の形式でコメントを記入し、エージェントを割り当てる：

```markdown
## 🤖 エージェント割り当て通知

@[Agent Name]

このIssueをあなたに割り当てます。以下のチェックリストを確認して着手してください。

### 割り当て詳細

**優先度**: CRITICAL / HIGH / MEDIUM / LOW
**見積時間**: X-Y 時間
**納期**: YYYY-MM-DD HH:MM
**フェーズ**: Phase X
**ブロッカー**: Issue #X, #Y (完了待機中)

### 着手前チェックリスト

着手する前に、以下を実施してください：

- [ ] Issue 説明全体を読んで理解した
- [ ] Sub-Issues チェックリストの項目を確認した
- [ ] 定義of Done (DoD) の要件を把握した
- [ ] 環境変数・設定が正しく設定されている
- [ ] ローカル開発環境が動作している
- [ ] テスト環境の準備ができている

### 実行手順

1. **着手宣言**: このコメントに返信して「着手します」と記入
2. **進捗報告**: 日別に進捗をコメントに記録（午前・午後）
3. **ブロッカー報告**: 問題が発生した場合は「エラー報告」コメントで通知
4. **完了報告**: Sub-Issues全て完了後、「完了報告」コメントで通知

### 問い合わせ

質問や不明な点がある場合は、このIssueのコメント欄で質問してください。

---

**割り当て日時**: YYYY-MM-DD HH:MM UTC
**割り当て者**: System
```

### Step 3: 進捗追跡

エージェント実行中、以下のライフサイクルで追跡：

#### 3.1. **着手確認** (Day 0)

期待される動き：
```
エージェント: 「着手します」コメント → Issue ステータス確認
システム: Issue を "In Progress" に更新 → ログに記録
```

#### 3.2. **日次進捗報告** (Day 0-N)

エージェントが以下の形式で日次レポートをコメント：

```markdown
## 📊 進捗報告 - [YYYY-MM-DD]

**現在のステータス**: In Progress

**本日実施事項**:
- [x] Sub-Issue A - 実装完了
- [ ] Sub-Issue B - テスト実行中（進捗: 70%）
- [ ] Sub-Issue C - 未着手

**完了したSub-Issues**:
- ✅ Item 1: [説明]
- ✅ Item 2: [説明]

**進行中のSub-Issues**:
- 🔄 Item 3: [説明] - 見積の70%進捗
- 🔄 Item 4: [説明] - 見積の50%進捗

**次のステップ**:
1. [具体的なアクション]
2. [具体的なアクション]

**ブロッカー**: なし

**テスト結果**:
```
[テスト実行ログやスクリーンショット]
```

**所要時間**: [予定 vs 実績]
- 予定: 4 時間
- 実績: 3.5 時間（進捗率: 87.5%）

---
```

#### 3.3. **エラー・ブロッカー報告** (随時)

問題が発生した場合：

```markdown
## ⚠️ エラー報告 - [YYYY-MM-DD HH:MM]

**エラー内容**:
[エラーの詳細説明]

**発生した Sub-Issue**:
Issue #X - [Sub-Issue名]

**再現手順**:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

**エラーログ**:
```
[スタックトレース・エラーメッセージ]
```

**影響範囲**:
- [ ] ブロッキング（作業継続不可）
- [ ] 高影響度（遅延が予想される）
- [ ] 低影響度（別方法で対応可能）

**推定原因**:
[根本原因の仮説]

**提案する解決策**:
1. [対応案1]
2. [対応案2]

**Support 要請**:
@[Person] の支援が必要です

---
```

#### 3.4. **完了報告** (Day N)

Issue 完了時：

```markdown
## ✅ 完了報告 - [YYYY-MM-DD]

**ステータス**: COMPLETE

**全Sub-Issues完了確認**:
- [x] Sub-Issue A - ✅ 完了
- [x] Sub-Issue B - ✅ 完了
- [x] Sub-Issue C - ✅ 完了
- [x] Sub-Issue D - ✅ 完了
- [x] Sub-Issue E - ✅ 完了

**定義of Done (DoD) 達成確認**:
- [x] 機能実装完了
- [x] ユニットテスト合格
- [x] E2E テスト合格
- [x] エラーメッセージ日本語化
- [x] コードレビュー合格
- [x] ドキュメント更新

**総所要時間**:
- 予定: 4-5 時間
- 実績: 4 時間 15 分
- 進捗: 100%

**テスト結果**:
- ユニットテスト: ✅ PASSED (カバレッジ 92%)
- E2E テスト: ✅ PASSED (5/5 シナリオ)
- 手動テスト: ✅ PASSED

**実装内容サマリー**:
[実装内容の簡潔な説明]

**備考**:
[特記事項・工夫した点等]

---

このIssueは完了です。自動クローズします。
```

### Step 4: レビュー & 承認

完了したIssueに対してレビューと承認を実施：

#### 4.1. **自動テスト実行**

GitHub Actions で自動実行：

```markdown
## 🔄 自動テスト実行結果 - [YYYY-MM-DD HH:MM]

**ステータス**: ✅ PASSED

**テスト項目**:
- ✅ Unit Tests: 45/45 PASSED
- ✅ E2E Tests: 12/12 PASSED
- ✅ Lint Check: ✅ PASSED
- ✅ Type Check: ✅ PASSED

**カバレッジ**: 92% (目標: 80%+)

**ビルド結果**: ✅ SUCCESS

---

自動テストに合格しました。コードレビューをお待ちします。
```

#### 4.2. **コードレビュー**

レビュアーがコメント：

```markdown
## 👁️ コードレビュー - [YYYY-MM-DD]

**レビュアー**: @[Reviewer]

### チェック項目

**コード品質**:
- [x] コードが読みやすい
- [x] 設計が適切
- [x] 命名規則が統一されている
- [x] コメント・ドキュメンテーションが充実

**テスト**:
- [x] ユニットテストが十分
- [x] E2Eテストが主要フロー網羅
- [x] カバレッジが目標達成

**パフォーマンス**:
- [x] DB クエリが最適化されている
- [x] バンドルサイズ増加が最小限
- [x] ページロード時間が許容範囲

**セキュリティ**:
- [x] 入力値検証が実装されている
- [x] SQL インジェクション対策
- [x] XSS 対策

**ドキュメント**:
- [x] API ドキュメント更新
- [x] README 更新
- [x] チェンジログ記載

### フィードバック

#### 指摘事項 1: [件名]
[詳細説明]

**修正内容**: [修正方法]

### 承認

**総合評価**: APPROVED ✅

このPR/Issueを承認します。
```

#### 4.3. **最終承認 & Issue クローズ**

```markdown
## 🎉 最終承認 - [YYYY-MM-DD]

**ステータス**: APPROVED & MERGED

### 承認者コメント

すべてのチェック項目が合格しました。

- ✅ 実装完了
- ✅ テスト合格
- ✅ レビュー承認
- ✅ ドキュメント更新
- ✅ 本番環境へのデプロイ準備完了

### デプロイメント予定

本番環境への自動デプロイが予定されています：

**予定日時**: YYYY-MM-DD HH:MM UTC
**デプロイ方法**: GitHub Actions
**ロールバック対応**: 準備完了

---

このIssueは完了です。ありがとうございました！
```

---

## コメント管理ルール

### コメント記入のルール

1. **タイムスタンプ必須**: すべてのコメントに日時を記載
2. **フォーマット統一**: マークダウン形式で統一
3. **タグ使用**: `#` で進捗フェーズを明示

   ```
   ## 進捗報告 - [日時]  ← フェーズを明示
   ```

4. **テスト結果添付**: 実施したテスト結果をコメントに記録

5. **スクリーンショット利用**: UI 変更はスクリーンショット添付

### コメント監視ルール

GitHub が自動監視：

- Issue コメント > 20件：警告
- Sub-Issues 完了率 > 50% → 次フェーズチェック
- ブロッカーコメント記入 → エスカレーション通知
- 48時間以上更新なし → リマインダー通知

---

## ログファイル管理

### ログディレクトリ構造

```
logs/
├── issue-metadata.json                    # 全Issue メタデータ
├── issue-1/
│   ├── status-updates.log               # ステータス更新ログ
│   ├── test-results.log                 # テスト実行ログ
│   ├── errors.log                       # エラーログ
│   └── completion-report.json           # 完了レポート JSON
├── issue-2/
│   └── ...
└── ...
```

### ログファイル記録例

**`logs/issue-1/status-updates.log`**:

```
[2026-01-07 09:00:00] 🔴 ISSUE START - Issue #1 Inbox 完全動作確認
[2026-01-07 09:00:15] 👤 エージェント割り当て: Agent-A
[2026-01-07 09:15:00] ✅ 着手確認: Agent-A が "着手します" をコメント
[2026-01-07 10:30:00] ✏️  Sub-Issue進捗: メール Webhook トークン認証 (50%)
[2026-01-07 11:15:00] ✅ Sub-Issue完了: メール Webhook トークン認証設定完了
[2026-01-07 13:00:00] ⚠️  ブロック発生: Inbox UI のバグ検出
[2026-01-07 13:30:00] 🔧 エラー報告コメント記入: UI レイアウト問題
[2026-01-07 14:45:00] ✅ ブロック解除: バグ修正完了
[2026-01-07 15:30:00] 🧪 テスト実行開始: ユニットテスト + E2E テスト
[2026-01-07 16:00:00] ✅ テスト合格: 全テスト PASSED
[2026-01-07 16:30:00] 📊 完了報告コメント記入: Sub-Issues 全て完了
[2026-01-07 17:00:00] 👁️  コードレビュー開始
[2026-01-07 17:45:00] ✅ レビュー承認: Reviewer がAPPROVED
[2026-01-07 18:00:00] 🎉 ISSUE COMPLETE - Issue #1 closed
```

---

## トレーサビリティダッシュボード

### 自動生成レポート（毎日17:00更新）

**ファイル**: `logs/daily-report.json`

```json
{
  "date": "2026-01-07",
  "summary": {
    "total_issues": 15,
    "completed": 2,
    "in_progress": 3,
    "blocked": 1,
    "not_started": 9,
    "completion_rate": 13.3
  },
  "phases": {
    "phase_1": {
      "name": "MVP 確実化",
      "target": "2026-01-07",
      "status": "IN PROGRESS",
      "completion": 66.7,
      "issues": [1, 2, 3]
    },
    "phase_2": {
      "name": "運用品質向上",
      "target": "2026-01-10",
      "status": "WAITING",
      "completion": 0,
      "issues": [4, 5, 6],
      "blocks": [1, 2, 3]
    }
  },
  "timeline": [
    {
      "timestamp": "2026-01-07 09:00:00",
      "event": "Issue #1 着手",
      "status": "OK"
    },
    {
      "timestamp": "2026-01-07 10:30:00",
      "event": "Issue #1 Sub-Issue進捗",
      "status": "OK"
    }
  ]
}
```

---

## チェックリスト: エージェント割り当て準備完了

- [x] GitHub Issues 15個を作成
- [x] Issue Template を作成
- [x] ISSUE_TRACKING.md を作成（トレーサビリティ定義）
- [x] AGENT_ASSIGNMENT.md を作成（このドキュメント）
- [x] logs/issue-metadata.json を作成
- [x] ログディレクトリ構造を定義
- [ ] Phase 1 Issues をエージェントに割り当て
- [ ] 各エージェント起動スクリプトを準備
- [ ] ログ自動集約スクリプトを実装
- [ ] 日次レポート自動生成スクリプトを実装

---

## 次のステップ

### 即座に実施すべきこと（本日）

1. **Phase 1 割り当て実施**
   - Issue #1, #2, #3 をエージェントに割り当て
   - 各エージェントに割り当てコメント記入
   - 着手確認を待つ

2. **ログ記録開始**
   - `logs/issue-1/`, `logs/issue-2/`, `logs/issue-3/` を作成
   - status-updates.log に "ISSUE START" を記録
   - エージェント着手時にログ更新

3. **進捗追跡開始**
   - GitHub Issues コメント欄を監視
   - エージェント進捗を`issue-metadata.json`に記録
   - 日別に進捗レポート確認

### Phase 1 完了後（明日以降）

4. **Phase 2 割り当て**
   - Phase 1 完了を確認
   - Phase 2 Issues (#4, #5, #6) を割り当て

5. **レビュー & 承認**
   - Phase 1 Issue 完了レポート確認
   - コードレビュー実施
   - 承認とマージ

---

**作成日**: 2026-01-07
**更新日**: 2026-01-07
**ステータス**: Active
**次レビュー予定**: 2026-01-10
